<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PriceWatch</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,1,0" />
    <link rel="stylesheet" href="water.min.css">
    <!-- <link rel="stylesheet" href="bulma.min.css"> -->
    <style>
        /* Container Styles */
        .container {
            margin-left: auto;
            margin-right: auto;
            max-width: 100rem;
            width:80%;
        }
        .align-left {
            text-align: left;
        }

        /* Basic Grid System */
        .columns {
            display: flex;
            flex-wrap: wrap;
        }

        .column {
            flex: 1;
            flex-basis: 0;
            max-width: 100%;
        }

        /* Mobile (default) */
        .column.is-12-mobile {
            flex: 0 0 100%;
            max-width: 100%;
        }

        /* Tablet */
        @media screen and (min-width: 768px) {
            .align-right-tablet {
                text-align: right;
            }
            .column.is-8 {
                flex: 0 0 66.6666%; /* 8 out of 12 columns */
                max-width: 66.6666%;
            }

            .column.is-4 {
                flex: 0 0 33.33333%; /* 4 out of 12 columns */
                max-width: 33.33333%;
            }
        }

        /* Desktop */
        @media screen and (min-width: 1024px) {
            .align-left-mobile {
                justify-content: initial;
            }
            .column.is-8 {
                flex: 0 0 66.6666%; /* 8 out of 12 columns */
                max-width: 66.6666%;
            }

            .column.is-4 {
                flex: 0 0 33.33333%; /* 4 out of 12 columns */
                max-width: 33.33333%;
            }
        }
        /*role button*/
        [role="button"] {
            cursor: pointer;
        }
        [role="button"]:hover {
            /*lighten the color*/
            filter: brightness(1.2);
        }
        .danger {
            color: hsl(348, 100%, 61%);
        }
        .warning {
            color: hsl(48, 100%, 67%);
        }
        .info {
            color: hsl(204, 86%, 53%);
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <div class="columns">
            <div class="column is-8 is-12-mobile">
                <input type="text" v-model="searchTerm" placeholder="Search by name" style="width:100%">
            </div>
            <div class="column is-4 is-12-mobile align-right-tablet align-left-mobile">
                <button @click="addItem">Add New Item</button>
            </div>
        </div>
        <div
            v-for="(item, index) in filteredItems"
            :key="item.id"
            class="columns"
        >
        <div class="column is-12-mobile is-8">
            <span>{{ item.title }} - ${{ item.price }}</span>
                </div>
                <div class="column is-12-mobile is-4 align-left-mobile align-right-tablet">
                    <a @click="modifyItem(index)" role="button" class="info">
                        <span class="material-symbols-outlined">
                            stylus
                        </span>
                    </a>
                    <a @click="deleteItem(index)" role="button" class="danger">
                        <span class="material-symbols-outlined">
                            delete
                        </span>
                    </a>
                </div>
            <div v-if="item.isEditing" class="columns">
                <input type="text" v-model="item.title">
                <input type="text" v-model="item.url">
                <button @click="saveItem(index)" class="info">Save</button>
                <button @click="cancelEdit(index)" class="warning">Cancel</button>
            </div>
        </div>
    </div>
    <script src="vue.global.prod.min.js"></script>
    <script>
        const { createApp, ref, computed } = Vue;
        
        createApp({
          setup() {
            const items = ref([
                {
                    id: 1,
                    title: 'Item 1',
                    price: 10,
                    url: 'https://www.google.com',
                    isEditing: false
                },
                {
                    id: 2,
                    title: 'Item 2aweo tpaowiet pao',
                    price: 20,
                    url: 'https://www.google.com',
                    isEditing: false
                },
                {
                    id: 3,
                    title: 'Item 3twepip',
                    price: 30,
                    url: 'https://www.google.com',
                    isEditing: false
                }
            ]);
            const searchTerm = ref('');
        
            const filteredItems = computed(() => {
              return items.value.filter(item => 
                item.title.toLowerCase().includes(searchTerm.value.toLowerCase())
              );
            });
        
            const addItem = () => {
              items.value.push({
                id: null,
                title: '',
                price: 0,
                url: '',
                isEditing: true
              });
            };
        
            const deleteItem = (index) => {
              items.value.splice(index, 1);
            };
        
            const modifyItem = (index) => {
              items.value[index].isEditing = true;
            };
        
            const saveItem = (index) => {
                if (!items.value[index].id) {
                    items.value[index].id = Date.now();
                }
              items.value[index].isEditing = false;
            };
        
            const cancelEdit = (index) => {
              if (!items.value[index].id) {
                deleteItem(index); // Remove if it's a new, unsaved item
              } else {
                items.value[index].isEditing = false;
              }
            };
        
            return { items, searchTerm, filteredItems, addItem, deleteItem, modifyItem, saveItem, cancelEdit };
          }
        }).mount('#app');
    </script>
</body>
</html>